<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memoria Colectiva - Colaborativa</title>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script>
        function googleTranslateElementInit() {
          new google.translate.TranslateElement({
            pageLanguage: 'es', 
            includedLanguages: 'en,es,zh-CN,hi,ar',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
          }, 'google_translate_element');
        }

        function validarEnvioColaborativo(event) {
            const detalle = document.getElementById('detalle').value.toLowerCase();
            const nombre = document.getElementById('nombre_victima').value.toLowerCase();
            const palabras_prohibidas = [
                "fascista", "antisemita", "antisionismo", "homofobico", "xenofobo", "puto", "trola", "negro de mierda",
                "judío de mierda", "dictadura", "nazi", "lunfardo despectivo", "mierda", "carajo", "boludo", "pelotudo"
            ];

            const textoCompleto = nombre + " " + detalle;
            let inapropiado = false;

            for (const palabra of palabras_prohibidas) {
                if (textoCompleto.includes(palabra)) {
                    inapropiado = true;
                    break;
                }
            }

            if (inapropiado) {
                alert("La descripción contiene lenguaje inapropiado, ofensivo o de odio. Por favor, modifique el detalle del hecho. El proyecto promueve el respeto y la no discriminación.");
                event.preventDefault();
                return false;
            }

            // Simulación de validación de imagen (Client-side only)
            const fileInput = document.getElementById('adjuntar_imagen');
            if (fileInput.files.length > 0) {
                const file = fileInput.files[0];
                const maxSize = 1024 * 1024; // 1 Megapixel = 1 MB (as a proxy for file size limit)
                const allowedTypes = ['image/jpeg', 'image/png'];

                if (file.size > maxSize) {
                    alert("El archivo adjunto excede el límite de 1 MB. Por favor, comprima la imagen.");
                    event.preventDefault();
                    return false;
                }

                if (!allowedTypes.includes(file.type)) {
                    alert("Solo se permiten imágenes con extensión .jpg o .png.");
                    event.preventDefault();
                    return false;
                }
            }
            
            // Si todo es válido, permite el envío via mailto
            return true;
        }
    </script>
    <style>
        :root {
            --color-fondo: #0d1b2a;
            --color-principal: #1b2d45;
            --color-acento: #e09f3e;
            --color-texto: #e0e1dd;
            --color-borde: #415a77;
        }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--color-fondo);
            color: var(--color-texto);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: var(--color-principal);
            padding: 20px 0;
            border-bottom: 3px solid var(--color-acento);
        }
        h1, h2, h3 {
            color: var(--color-acento);
            margin-top: 0;
        }
        a {
            color: var(--color-acento);
            text-decoration: none;
            transition: color 0.3s;
        }
        a:hover {
            color: #ffc878;
        }
        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        nav a {
            background-color: var(--color-borde);
            padding: 10px 15px;
            border-radius: 4px;
            color: var(--color-texto);
            text-transform: uppercase;
        }
        .form-container {
            margin: 30px auto;
            background-color: var(--color-principal);
            padding: 30px;
            border-radius: 8px;
            border: 1px solid var(--color-borde);
            text-align: left;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-container input[type="text"], 
        .form-container input[type="date"], 
        .form-container textarea,
        .form-container select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--color-borde);
            border-radius: 4px;
            background-color: var(--color-fondo);
            color: var(--color-texto);
            box-sizing: border-box;
        }
        .file-upload-wrapper {
            background-color: var(--color-fondo);
            border: 1px solid var(--color-borde);
            padding: 10px;
            border-radius: 4px;
        }
        .btn {
            background-color: var(--color-acento);
            color: var(--color-fondo);
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            text-transform: uppercase;
            font-weight: bold;
            display: block;
            width: 100%;
            margin-top: 25px;
        }
        .btn:hover {
            background-color: #d18d30;
        }
        .legend {
            font-size: 0.8em;
            color: var(--color-borde);
            margin-top: 10px;
            text-align: center;
        }
        /* Responsiveness */
        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            .form-container {
                padding: 15px;
            }
            nav {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PÁGINA COLABORATIVA</h1>
            <p>Súmate a la Memoria Colectiva. Tu caso es parte de la historia.</p>
            <div id="google_translate_element"></div>
        </header>

        <nav>
            <a href="index.html">Inicio / Manifiesto</a>
            <a href="carrousel.html">Casos Documentados</a>
            <a href="colabora.html">Página Colaborativa</a>
        </nav>

        <div class="form-container">
            <h2>Ingreso de Caso Real</h2>
            <p>Complete el formulario con la mayor cantidad de datos posibles. Esta información será revisada y verificada antes de su publicación en el carrusel de casos documentados.</p>
            
            <form action="mailto:archivovivox@gmail.com" method="post" enctype="text/plain" onsubmit="return validarEnvioColaborativo(event)">
                <div class="form-group">
                    <label for="nombre_victima">Víctima: Nombre completo</label>
                    <input type="text" id="nombre_victima" name="nombre_victima" required>
                </div>
                <div class="form-group">
                    <label for="edad">Edad:</label>
                    <input type="text" id="edad" name="edad" placeholder="Edad al momento del hecho (ej: 35 años)" required>
                </div>
                <div class="form-group">
                    <label for="tipo_hecho">Tipo de Hecho (Desplegable):</label>
                    <select id="tipo_hecho" name="tipo_hecho" required>
                        <option value="">-- Seleccionar Tipo de Hecho --</option>
                        <option value="muerte_accidente_transito">Muerte en Accidente de Tránsito</option>
                        <option value="desaparecido_democracia">Desaparecido en Democracia</option>
                        <option value="desaparecido_dictadura">Desaparecido en Dictadura</option>
                        <option value="victima_homofobia">Víctima de Homofobia</option>
                        <option value="victima_xenofobia">Víctima de Xenofobia</option>
                        <option value="victima_antisemitismo">Víctima de Antisemitismo</option>
                        <option value="victima_genocidio">Víctima de Genocidio (Ej. Masacres)</option>
                        <option value="victima_lesiones">Víctima de Lesiones Graves</option>
                        <option value="mala_praxis_medica">Víctima de Mala Praxis Médica</option>
                        <option value="violencia_institucional">Víctima de Violencia Institucional</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="fecha">Fecha del Hecho:</label>
                    <input type="date" id="fecha" name="fecha" required>
                </div>
                <div class="form-group">
                    <label for="detalle">Detalle del Hecho (Máximo 500 caracteres):</label>
                    <textarea id="detalle" name="detalle" rows="4" maxlength="500" required></textarea>
                </div>
                <div class="form-group">
                    <label for="fuente">Fuente (Cita o Enlace abierto para verificación):</label>
                    <input type="text" id="fuente" name="fuente" placeholder="Ej: Diario La Nación, Archivo Público XYZ, o Enlace URL" required>
                </div>
                
                <div class="form-group">
                    <label>Adjuntar Imagen (Opcional - JPEG/PNG, máx. 1 MB):</label>
                    <div class="file-upload-wrapper">
                        <input type="file" id="adjuntar_imagen" name="Adjuntar Imagen" accept=".jpg, .png">
                    </div>
                </div>

                <button type="submit" class="btn">Enviar</button>
            </form>
            <p class="legend">⚠️ **Aviso Legal:** No se recopilan datos ni se provee a terceros de datos o información personal. La información se enviará a la casilla **archivovivox@gmail.com** (que no figura en el botón) para su verificación. Deberá adjuntar la imagen manualmente en su cliente de correo.</p>
        </div>
    </div>
</body>
</html>